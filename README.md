# README: Calculator Compiler

## Overview
This is a simple calculator compiler implemented using Flex (Lex) and Bison (Yacc) for parsing arithmetic expressions. The compiler evaluates arithmetic expressions, generates an Abstract Syntax Tree (AST), and then produces 3-address code for the given expressions.

## Prerequisites
1. **Flex (Lex) and Bison (Yacc)**: You need Flex and Bison installed on your system to build and run this project. You can install them via package managers like `apt` or `brew`.

2. **C++ Compiler**: You will need a C++ compiler like `g++` to compile and run the generated code.

## Building and Running

   ```bash
   ./run_parser.sh
   ```

   Here, `input.txt` should contain the arithmetic expression you want to evaluate. The compiler will generate the AST, 3-address code, and print them.

## Code Structure

### Lexical Analysis
- The lexical analysis is defined in the `calculator.l` file.
- It defines regular expressions for tokens such as numbers, operators, parentheses, whitespace, and newline.
- When a token is recognized, the corresponding action is triggered, and the token's value is stored in `yylval` for further processing.

### Syntax Analysis
- The syntax analysis is defined in the `calculator.y` file using Bison (Yacc) grammar.
- It specifies the grammar rules for parsing arithmetic expressions and building an Abstract Syntax Tree (AST).

### AST Generation
- The AST is implemented as a custom class `Treenode` in the `helper.hpp` file.
- The `Treenode` class represents nodes in the AST, storing values, operators, and links to child nodes.
- AST nodes are constructed during parsing.

### 3-Address Code Generation
- 3-address code generation is implemented in the `generate3AddressCode` method within the `Treenode` class.
- It uses a stack (`st`) to traverse the AST and generate 3-address code.
- The code is written to the `3AddressCode.txt` file.
- Temporary variables (e.g., `t0`, `t1`) are used to store intermediate results.

### DAG (Directed Acyclic Graph) Generation
- The Directed Acyclic Graph (DAG) is generated by the `printDAG` method within the `Treenode` class.
- It creates a visualization of the expressions and their relationships.
- The generated DAG is saved as `DAG.dot` and displayed as `DAG.png`.

## Output
- The compiler produces an output based on the input expression.
- It prints the result of the expression evaluation.
- It generates an AST and stores it as `AST.dot` and `AST.png`.
- It generates 3-address code and stores it in `3AddressCode.txt`.

## Error Handling
- The compiler provides basic error handling.
- It reports errors with line numbers and the problematic input text.

## Sample Input
```
2 + 3 * (5 - 1) / 2
```

## Sample Output
- Result: 8
- AST: [Visualized as a tree]
- 3-Address Code:
  ```
  t0 := 5 - 1
  t1 := 3 * t0
  t2 := 2 / t1
  t3 := 2 + t2
  ```
